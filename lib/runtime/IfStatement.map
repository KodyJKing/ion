{"version":3,"sources":["IfStatement.ion"],"names":["ion","Statement","Factory","IfStatement","properties","activate",{"type":"Identifier","name":"activate","loc":{"start":{"line":8,"column":8,"fixed":true,"source":"ion/runtime/IfStatement.ion"},"end":{"line":8,"column":16,"fixed":true,"source":"ion/runtime/IfStatement.ion"}}},"testExpression","context","createRuntime","test","unobserve","observe","testExpressionObserver","value","alternateStatement","isActive","deactivate","newContext","order","consequentStatement","consequent","alternate"],"mappings":"aAAA;AAAA,IACIA,GAAA,G,OAAM,CAAO,KAAP,CADV,E,IAAA;cAE0B,CAAO,IAAP,C,CAF1B;IAEKC,S,QAAAA,S,CAFL;IAEeC,O,QAAAA,O,CAFf;IAKaC,W;;QACTC,UAAA,EAAW;AAAA,YACPC,QAAA,EAAUC,YAClB;AAAA,gB,4BADQD,Q,uBACI,CAAZ;AAAA,gBACY,KAACE,cAAD,QAACA,c,WAAD,KAACA,c,GAAkB,KAACC,OAAD,CAASC,aAAT,CAAuB,KAACC,IAAxB,CAAnB,CADZ;AAAA,gBAEY,KAACC,SAAD,GAAa,KAACJ,cAAD,CAAgBK,OAAhB,CACT,KAACC,sBAAD,QAACA,sB,WAAD,KAACA,sB,YAA0B,UAACC,KAAD,EAC3C;AAAA,oBAAoB,IAAGA,KAAH,EACpB;AAAA,wBAAwB,IAAG,KAACC,kB,WAAD,KAACA,kBAAD,CAAqBC,Q,SAAxB,EACxB;AAAA,4BAA4B,KAACD,kBAAD,CAAoBE,UAApB,GAA5B;AAAA,4BAG4B,KAACF,kBAAD,GAAsB,IAAtB,CAH5B;AAAA,yBADA;AAAA,wBAKwB,IAAIP,OAAA,GAAU,KAACA,OAAD,CAASU,UAAT,CAAoB,IAApB,EAA0B,KAACC,KAA3B,CAAd,CALxB;AAAA,wBAMwB,KAACC,mBAAD,GAAuBZ,OAAA,CAAQC,aAAR,CAAsB,KAACY,UAAvB,CAAvB,CANxB;AAAA,wBAOwB,KAACD,mBAAD,CAAqBf,QAArB,GAPxB;AAAA,qBADoB,MAUpB;AAAA,wBAAwB,IAAG,KAACe,mB,WAAD,KAACA,mBAAD,CAAsBJ,Q,SAAzB,EACxB;AAAA,4BAA4B,KAACI,mBAAD,CAAqBH,UAArB,GAA5B;AAAA,4BAC4B,KAACG,mBAAD,GAAuB,IAAvB,CAD5B;AAAA,yBADA;AAAA,wBAGwB,IAAG,KAACE,S,QAAJ,EACxB;AAAA,4BAA4B,IAAId,OAAA,GAAU,KAACA,OAAD,CAASU,UAAT,CAAoB,IAApB,EAA0B,KAACC,KAA3B,CAAd,CAA5B;AAAA,4BAC4B,KAACJ,kBAAD,GAAsBP,OAAA,CAAQC,aAAR,CAAsB,KAACa,SAAvB,CAAtB,CAD5B;AAAA,4BAE4B,KAACP,kBAAD,CAAoBV,QAApB,GAF5B;AAAA,yBAJA;AAAA,qBAVA;AAAA,iB,OAFyB,CAAb,CAFZ;AAAA,aAFe;AAAA,YAwBPY,UAAA,EAAYX,YACpB;AAAA,gB,4BADQW,U,uBACI,CAAZ;AAAA,gBACY,KAACN,SAAD,GADZ;AAAA,gBAEY,IAAG,KAACI,kB,WAAD,KAACA,kBAAD,CAAqBC,Q,SAAxB,EACZ;AAAA,oBAAgB,KAACD,kB,WAAD,KAACA,kBAAD,CAAqBE,UAArB,E,SAAA,CAAhB;AAAA,oBACgB,KAACF,kBAAD,GAAsB,IAAtB,CADhB;AAAA,iBAHA;AAAA,gBAKY,IAAG,KAACK,mB,WAAD,KAACA,mBAAD,CAAsBJ,Q,SAAzB,EACZ;AAAA,oBAAgB,KAACI,mB,WAAD,KAACA,mBAAD,CAAsBH,UAAtB,E,SAAA,CAAhB;AAAA,oBACgB,KAACG,mBAAD,GAAuB,IAAvB,CADhB;AAAA,iBANA;AAAA,aAzBe;AAAA,S;OADkBnB,S,EALjC;2BAKaE,W","sourcesContent":["const\n    ion = import '../'\n    {Statement,Factory} = import './'\n\n\nexport class IfStatement extends Statement\n    properties:\n        activate: ->\n            super\n            @testExpression ?= @context.createRuntime(@test)\n            @unobserve = @testExpression.observe(\n                @testExpressionObserver ?= (value) =>\n                    if value\n                        if @alternateStatement?.isActive\n                            @alternateStatement.deactivate()\n                            # we don't have to necessarily delete old statements\n                            # but behavior is more predictable this way\n                            @alternateStatement = null\n                        let context = @context.newContext(null, @order)\n                        @consequentStatement = context.createRuntime(@consequent)\n                        @consequentStatement.activate()\n                    else\n                        if @consequentStatement?.isActive\n                            @consequentStatement.deactivate()\n                            @consequentStatement = null\n                        if @alternate?\n                            let context = @context.newContext(null, @order)\n                            @alternateStatement = context.createRuntime(@alternate)\n                            @alternateStatement.activate()\n            )\n        deactivate: ->\n            super\n            @unobserve()\n            if @alternateStatement?.isActive\n                @alternateStatement?.deactivate()\n                @alternateStatement = null\n            if @consequentStatement?.isActive\n                @consequentStatement?.deactivate()\n                @consequentStatement = null\n"]}