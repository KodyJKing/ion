// Generated by CoffeeScript 1.3.3
(function(){var e,t,n,r,i,s,o,u,a;t=function(){function e(e,t,n,r){this.symbol=e,this.type=t,this.text=n!=null?n:this.type,this.value=r}return e.prototype.toJSON=function(){return this.symbol?this.type:this.value},e.prototype.toString=function(){return this.text},e}(),a=function(e){return e.match(/^\s*null\s*$/)?null:e.match(/^\s*(true|false)\s*$/)?Boolean(e.trim()):e.match(/^\s*[0-9]+(\.[0-9]+)?([eE][-+]?[0-9]+)?\s*$/)?Number(e.trim()):e.match(/^\s*\d\d\d\d-\d\d-\d\d(T\d\d:\d\d(:\d\d(\.\d{1,3})?)?(Z|([+-]\d\d:\d\d))?)?\s*$/)?new Date(e.trim()):e.match(/^\s*{}\s*$/)?{}:e.trim()},u=[[/^\s*\[/,function(e){return new t(!0,"[",e)}],[/^\s*\]/,function(e){return new t(!0,"]",e)}],[/^\s*:/,function(e){return new t(!0,":",e)}],[/^\s*,/,function(e){return new t(!0,",",e)}],[/^\s*"([^"\\]|(\\([\/'"\\bfnrt]|(u[a-fA-F0-9]{4}))))*"/,function(e){return new t(!1,"quoted",e,JSON.parse(e))}],[/^[^,:\[\]]+/,function(e){return new t(!1,"unquoted",e,a(e))}]],o=function(e){var t,n,r,i,s,o,a;if(e.trim().length===0)return null;i=[];while(e.trim().length>0){n=!1;for(o=0,a=u.length;o<a;o++){s=u[o],t=e.match(s[0]);if(t!=null){n=!0,i.push(s[1](r=t[0])),e=e.substring(r.length);break}}if(!n){i.push(e);break}}return i},e=function(){function e(e,t,n){var r,s;this.lineNumber=e,this.line=t,this.indent=n,t!=null&&(this.tokens=o(t),this.isText=i(this.tokens),((s=this.tokens)!=null?s.length:void 0)>=2&&!(r=this.tokens[0]).symbol&&this.tokens[1].type===":"&&(this.key=r.value))}return e.prototype.isEmpty=function(){return this.tokens==null},e.prototype.hasColon=function(){var e,t;return this.tokens!=null&&(((e=this.tokens[0])!=null?e.type:void 0)===":"||((t=this.tokens[1])!=null?t.type:void 0)===":")},e.prototype.error=function(e,t){var n;return n=new Error(""+e+", line:"+this.lineNumber),n.lineNumber=this.lineNumber,n.line=this.line,n},e.prototype.getAllDescendantLines=function(e,t,n){var r,i,s,o;t==null&&(t=[]),n==null&&(n=this.indent+1);if(this.children!=null){o=this.children;for(i=0,s=o.length;i<s;i++)r=o[i],t.push(r.line.substring(n)),r.getAllDescendantLines(r,t,n)}return t},e.prototype.getComplexType=function(){var e,t,n,r,i,s,o,u,a;t=((o=this.tokens)!=null?o.length:void 0)>=3?(u=this.tokens)!=null?u.slice(2).join("").trim():void 0:void 0;if(t!=null)return console.log("("+t+")"),t;r=0,n=0,a=this.children;for(i=0,s=a.length;i<s;i++){e=a[i];if(e.isText&&!e.key||e.children!=null&&!e.hasColon())return'""';e.isEmpty()||(r++,e.key&&n++)}if(n===r)return"{}";if(n===0)return"[]";throw this.error("Inconsistent child keys")},e.prototype.getSimpleValue=function(){var e,t;e=this.tokens;if(e.length===0)return void 0;this.key&&(e=e.slice(2));if(e.length>=2&&e[0].type==="["&&e[e.length-1].type==="]"&&(t=n(e.slice(1,-1))))return t;if(!this.isText){if(e.length===1)return e[0].value;if(t=n(e))return t}return e.join("").trim()},e.prototype.getComplexValue=function(){var e,t,n,r,i,s;t=this.getComplexType();if(t==='""')n=this.getAllDescendantLines().join("\n");else if(t==="[]")n=function(){var t,n,r,i;r=this.children,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.isEmpty()||i.push(e.getValue());return i}.call(this);else{n={},s=this.children;for(r=0,i=s.length;r<i;r++)e=s[r],e.isEmpty()||(n[e.key]=e.getValue())}return n},e.prototype.getValue=function(){var e;if(this.children!=null){if(this.isText)throw this.children[0].error("Children not expected");e=this.getComplexValue()}else e=this.getSimpleValue();return e},e}(),i=function(e){var t,n,r,i,s;if(e){t=/[^\s\w]/;for(i=0,s=e.length;i<s;i++){n=e[i];if(n.type==="unquoted"){r=n.value;if(typeof r=="string"&&t.test(r))return!0}}}return!1},n=function(e){var t,n,r,i,s;for(t=i=0,s=e.length;i<s;t=++i){r=e[t];if(t%2===0){if(r.symbol)return null}else if(r.type!==",")return null}return function(){var t,r,i,s;i=[];for(t=0,r=e.length,s=2;t<r;t+=s)n=e[t],i.push(n.value);return i}()},s=function(t){var n,r,i,s,o,u,a;i=new e(null,null,-1),s=[i];for(o=0,u=t.length;o<u;o++){n=t[o];while(n.indent<=(r=s[s.length-1]).indent)s.pop();((a=r.children)!=null?a:r.children=[]).push(n),s.push(n)}return i},r={parse:function(t,n){var r,i,o,u,a,f,l,c,h,p,d;t=t.trim(),u=[],c=t.split("\r\n");for(i=f=0,l=c.length;f<l;i=++f){o=c[i];if(o.trim()[0]==="#")continue;r=(h=o.trim().length===0?r:r=(p=o.match(/^\s*/))!=null?(d=p[0])!=null?d.length:void 0:void 0)!=null?h:0,u.push(new e(i+1,o,r))}return a=s(u),a.value=a.getValue(),console.log(JSON.stringify(a,null,"    "))},stringify:function(e){}},typeof module=="undefined"?function(){return this.ion=r}():module.exports=r}).call(this);