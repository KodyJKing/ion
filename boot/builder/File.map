{"version":3,"sources":["File.ion"],"names":["global","Window","ion","fs","np","utility","File","constructor","path","Error","Object","defineProperties","value","enumerable","writable","modified","getModified","makeReactive","watcher","existsSync","watch","close","properties","directoryName","get",{"type":"Identifier","name":"get","loc":{"start":{"line":44,"column":12,"fixed":true},"end":{"line":44,"column":15,"fixed":true}}},"dirname","copyFrom","file","write","read","console","log","normalize","encoding","getExtension","index","lastIndexOf","substring","content","delete","toString","valueOf"],"mappings":"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","sourcesContent":["\r\nif global.Window\r\n    return\r\n\r\nconst\r\n    ion = import '../'\r\n    fs = import 'fs'\r\n    np = import 'path'\r\n    utility = import './utility'\r\n\r\nexport class File\r\n    constructor: (path) ->\r\n        if path?.constructor is File\r\n            return path\r\n        if @constructor isnt File\r\n            return new File(path)\r\n        if typeof path isnt 'string'\r\n            throw new Error(\"path string is required\")\r\n        Object.defineProperties(\r\n            @\r\n            {}\r\n                path:\r\n                    value: path\r\n                    enumerable: true\r\n                    writable: false\r\n        )\r\n        # set modified immediately\r\n        @modified = utility.getModified(path)\r\n        # make us reactive to observers.  Specifically we will just update our modified value as needed.\r\n        ion.makeReactive(\r\n            @\r\n            =>\r\n                let watcher\r\n                if fs.existsSync(@path)\r\n                    watcher = fs.watch(\r\n                        @path\r\n                        =>\r\n                            @modified = utility.getModified(@path)\r\n                    )\r\n                return -> watcher?.close()\r\n        )\r\n    properties:\r\n        directoryName:\r\n            get: -> np.dirname(@path)\r\n        copyFrom: (file) ->\r\n            file = File(file)\r\n            @write(file.read(null), null)\r\n            console.log(\"Copied: {{np.normalize(@path)}}\")\r\n        read: (encoding) ->\r\n            if fs.existsSync(@path)\r\n                return utility.read(@path, encoding)\r\n            else\r\n                return null\r\n        getExtension: ->\r\n            let index = @path.lastIndexOf('.')\r\n            return index < 0 ? \"\" : @path.substring(index)\r\n        write: (content, encoding) ->\r\n            if content? and content isnt @read(encoding)\r\n                utility.write(@path, content, encoding)\r\n        delete: -> utility.write(@path, null)\r\n        toString: -> @path\r\n        valueOf: -> @path\r\n"]}